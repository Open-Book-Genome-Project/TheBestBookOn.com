<h2>Browse recommendations</h2>

<!-- get every candidate from every recommendation... -->

<!-- send all of their book keys to Open Library -->

{% set page = request.args.get("page", 0) | int %}
{% set recs = models["recommendations"].paginate(page) %}

{% for rec in recs %}
<div class="block">
  <div class="recommendation">
    <div>
      <a href="https://openlibrary.org/works/{{rec.winner.work_olid}}">
        {% if recs.works|length > 0 and recs.works[rec.winner.work_olid].get('cover_url') %}
        <img src="{{recs.works[rec.winner.work_olid].get('cover_url')}}">
        {% endif %}
      </a>
    </div>
    <div>
      <p>The best book on: "{{ rec.topic.name }}" by {{ rec.username }}:</p>
      <p>{{ rec.description }}</p>
      <ul>
	{% for candidate in rec.candidates %}
	  {% set candidate_work = recs.works[candidate.work_olid] %}
          <p>{{ candidate }}</p>
	  <p>{{ candidate_work }}</p>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endfor %}



