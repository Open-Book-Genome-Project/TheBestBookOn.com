<h2>Browse recommendations</h2>

<!-- get every candidate from every recommendation... -->

<!-- send all of their book keys to Open Library -->

{% set page = request.args.get("page", 0) | int %}
{% set recs = models["recommendations"].paginate(page, is_approved=True) %}

{% for rec in recs %}
<div class="block">
  <div class="recommendation">
<<<<<<< eb98fc79d63e515a9e8a0f9c86f244bf8124de0f
    <div>
      <a href="https://openlibrary.org/works/{{rec.winner.work_olid}}">
        {% if recs.works|length > 0 and recs.works[rec.winner.work_olid].get('cover_url') %}
        <img src="{{recs.works[rec.winner.work_olid].get('cover_url')}}">
        {% endif %}
      </a>
=======
    <div><a href="https://openlibrary.org/works/{{rec.winner.work_olid}}">
	<img class="bookcover" src="{{recs.works[rec.winner.work_olid].get('cover_url')}}"></a>
>>>>>>> add dashed bottom border
    </div>
    <div>
      <p>The best book on: "<span class="bold">{{ rec.topic.name }}</span>" by <span class="bold">{{ rec.username }}</span>:</p>
      <p class="italic">{{ rec.winner.work_olid }}</p>
      <h4>Why this is the best book...</h4>
      <p>{{ rec.description }}</p>
      <h4>Candidates</h4>
      <ul>
	{% for candidate in rec.candidates %}
	  {% set candidate_work = recs.works[candidate.work_olid] %}
    <!-- <p>{{ candidate_work }}</p> -->

    <li class="italic"><a href="https://openlibrary.org{{candidate_work.work_key}}">{{ candidate_work.title }}</a> by {{ candidate_work.authors[0]['name']}}</li>
    
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endfor %}
